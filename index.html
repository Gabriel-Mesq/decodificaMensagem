<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title> Mensagem Secreta</title>
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <link href='css/style.css' rel='stylesheet'>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">
</head>

<body>

    <header>

        <div class="inner">

            <div class="left-side">
                <div>
                    <h1>Cryptography</h1>
                </div>
            </div>
            
            <nav>
                <li><span><a href="index.html">Encriptação</a></span></li>
                <li><span><a href="decryption.html">Decriptação</a></span></li>
                <li><span><a href="info.html">Como Funciona?</a></span></li>
            </nav>
        
        </div>

    </header>

<py-script>
    from js import document, alert, console
   
    def func(*ags, **kws):
    
        key =  document.getElementById('key').value;
        msg = document.getElementById('msg').value;

        letters = list('<1!aZb2úYcX3ódWe4íVfU5ég&Th6áSiR7àjQk8âPlO9êmÕNn0ÃôMo~Lçãp\"KqÇõ\'JrIÀ,sHÔt.GÊuF:ÂvEw;ÚDxCÓ()yÍBz-ÉA ?Á>')
        l_key = len(key)

        enc = []
        j = 0

        for i in msg:
            
            if j >= l_key:
                j = 0
            
            aux = (letters.index(i) + letters.index(key[j]) + 1)%len(letters)
            enc.append(letters[aux])
            j+=1

        result =  "".join(enc)
        console.log('sex', result)
        pyscript.write("Result", result) 

</py-script>    

        
    <center>
        
        <br/>
        <h2>Insira a chave de encriptação:</h2>
        <input id="key" type="text">
        <br><br/><br/>
        <h2>Insira a mensagem:</h2>
        <textarea id="msg"></textarea>
        <br/>
        <button id="convert" type="submit"  class="btn btn-info" pys-onClick="func">Convert</button>
        
        <h1>Resultado:</h1>
        <textarea id="Result"></textarea>

    </center>

    </body>
    </html>     
